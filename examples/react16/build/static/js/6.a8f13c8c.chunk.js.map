{"version":3,"sources":["pages/Music.js"],"names":["player","_useState","useState","_useState2","_slicedToArray","musicUrl","setMusicUrl","useEffect","Player","id","url","volume","width","height","mediaType","presets","MusicPreset","ignores","controls","initShow","mode","marginControls","videoConfig","crossOrigin","Analyze","document","querySelector","bgColor","stroke","lyric","Lyric","bind","on","res","nullText","show","React","createElement","Fragment","className","Input","onChange","e","target","value","style","marginLeft","marginRight","addonBefore","Button","onClick","console","log","src","type","href","rel"],"mappings":"2NAMIA,G,cAAS,MACE,qBACb,IAAAC,EAAgCC,mBAAS,MAAKC,EAAAC,YAAAH,EAAA,GAAvCI,EAAQF,EAAA,GAAEG,EAAWH,EAAA,GAwD5B,OA/CAI,qBAAU,YAGRP,EAAS,IAAIQ,IAAO,CAClBC,GAAI,SACJC,IAAK,sIACLC,OAAQ,GACRC,MAAO,OACPC,OAAQ,GACRC,UAAW,QACXC,QAAS,CAAC,UAAWC,KACrBC,QAAS,CAAC,gBACVC,SAAU,CACRC,UAAU,EACVC,KAAM,QAERC,gBAAgB,EAChBC,YAAa,CACXC,YAAa,gBAGVA,YAAc,YAGrB,IAAIC,IAAQxB,EAAQyB,SAASC,cAAc,UAAW,CACpDC,QAAS,kBACTC,OAAQ,IAIV,IAAIC,EAAQ,IAAIC,IAAM,CA7BT,y6EA6BsBL,SAASC,cAAc,OAAQ,IAClEG,EAAME,KAAK/B,GAaX,OAXAA,EAAOgC,GAAG,eAAe,SAACC,GACN,OAAdA,EAAIJ,OACNK,KAIJlC,EAAOgC,GAAG,WAAW,WACnBH,EAAMM,OACNnC,EAAOoB,KAAO,KAGT,eACN,IAGDgB,IAAAC,cAAAD,IAAAE,SAAA,KACEF,IAAAC,cAAA,OAAK5B,GAAG,UAAU8B,UAAU,iBAC1BH,IAAAC,cAAA,OAAK5B,GAAG,UACR2B,IAAAC,cAAA,OAAK5B,GAAG,QAAO,2BAEb2B,IAAAC,cAAA,WAAK,yBACLD,IAAAC,cAAA,WAAK,6BAEPD,IAAAC,cAAA,OAAKE,UAAU,WACfH,IAAAC,cAAA,OAAK5B,GAAG,UACN2B,IAAAC,cAAA,UAAQzB,MAAM,MAAMC,OAAO,SAE7BuB,IAAAC,cAAA,OAAK5B,GAAG,QACN2B,IAAAC,cAAA,OAAK5B,GAAG,QAEV2B,IAAAC,cAAA,OAAK5B,GAAG,YAEV2B,IAAAC,cAAA,OAAKE,UAAU,WACbH,IAAAC,cAACG,IAAK,CACJC,SAAU,SAACC,GACTpC,EAAYoC,EAAEC,OAAOC,QAEvBC,MAAO,CAAEjC,MAAO,QAASkC,WAAY,OAAQC,YAAa,OAC1DC,YAAY,wCACZJ,MAAOvC,IAET+B,IAAAC,cAACY,IAAM,CAACC,QAlFM,WAClBC,QAAQC,IAAI,UAAWpD,GACvBmD,QAAQC,IAAI,YAAa/C,GACrBL,IACFA,EAAOqD,IAAMhD,EACbL,EAAOU,IAAML,IA6EmBiD,KAAK,WAAU,iBAI/ClB,IAAAC,cAAA,OAAKE,UAAU,WACbH,IAAAC,cAAA,KAAGkB,KAAK,6DAA6DC,IAAI,sBAAsBb,OAAO,UAAS","file":"static/js/6.a8f13c8c.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Input, Button } from 'antd';\r\nimport Player from 'xgplayer';\r\nimport MusicPreset, { Lyric, Analyze } from 'xgplayer-music';\r\nimport 'xgplayer/dist/index.min.css';\r\nimport './Music.css';\r\nlet player = null;\r\nexport default function () {\r\n  const [musicUrl, setMusicUrl] = useState(null);\r\n  const ChangeMusic = function () {\r\n    console.log('player=', player);\r\n    console.log('musiculr=', musicUrl);\r\n    if (player) {\r\n      player.src = musicUrl;\r\n      player.url = musicUrl;\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    let lyricTxts = `[00:00.00] 脆弱一分钟\\n[00:00.00] 作曲 : 林家谦\\n[00:00.00] 作词 : 徐世珍/吴辉福\\n[00:00.000]编曲：林家谦\\n[00:00.000]时钟不要走\\n[00:04.220]让我脆弱一分钟\\n[00:07.440]要多久才能习惯被放手\\n[00:15.800]马克杯空了 暖暖的温热\\n[00:22.660]却还在我手中停留\\n[00:27.960]\\n[00:29.790]勇气不要走\\n[00:32.200]给我理由再冲动\\n[00:35.690]去相信爱情 就算还在痛\\n[00:43.960]如果我不说不会有人懂\\n[00:50.720]失去你我有多寂寞\\n[00:55.610]还是愿意\\n[00:57.580]付出一切仅仅为了一个好梦\\n[01:03.980]梦里有人真心爱我 陪我快乐也陪我沉默\\n[01:11.260]没有无缘无故的痛承受越多越成熟\\n[01:18.630]能让你拥抱更好的我\\n[01:25.030] 谁也不要走\\n[01:28.270]应该是一种奢求\\n[01:31.900]可是我只想 握紧你的手\\n[01:39.780]我宁愿等候 也不愿错过\\n[01:46.630]你对我微笑的时候\\n[01:56.780]\\n[02:18.910]还是愿意\\n[02:21.320]用尽全力仅仅为了一个以后\\n[02:27.870]哪怕生命并不温柔哪怕被幸福一再反驳\\n[02:34.870]也要相信伤痕累累 其实只是在琢磨\\n[02:42.070]能让你为之一亮 的我\\n[02:53.910]\\n[02:56.350]制作人：林宥嘉\\n[02:57.750]制作助理：张婕汝\\n[02:59.010]录音师：陈文骏、叶育轩\\n[03:00.410]录音室：白金录音室\\n[03:01.740]混音师：SimonLi @ nOiz\\n[03:03.000]OP: Terence Lam Production & Co. (Warner/Chappell Music, HK Ltd.)\\n[03:04.050]SP: Warner/Chappell Music Taiwan Ltd.\\n[03:04.910]OP：Universal Ms Publ Ltd Taiwan\\n`;\r\n    // http://music.163.com/song/media/outer/url?id=447925558.mp3\r\n    player = new Player({\r\n      id: 'player',\r\n      url: 'http://m10.music.126.net/20240120225401/dcbdb1b03ab81885a1bc948f89d68da8/ymusic/5353/0f0f/0358/d99739615f8e5153d77042092f07fd77.mp3',\r\n      volume: 0.8,\r\n      width: '100%',\r\n      height: 50,\r\n      mediaType: 'audio',\r\n      presets: ['default', MusicPreset],\r\n      ignores: ['playbackrate'],\r\n      controls: {\r\n        initShow: true,\r\n        mode: 'flex',\r\n      },\r\n      marginControls: true,\r\n      videoConfig: {\r\n        crossOrigin: 'anonymous',\r\n      },\r\n    });\r\n    player.crossOrigin = 'anonymous';\r\n\r\n    // 初始化频谱\r\n    new Analyze(player, document.querySelector('canvas'), {\r\n      bgColor: 'rgba(0,0,0,0.7)',\r\n      stroke: 3,\r\n    });\r\n\r\n    // 初始化歌词模块\r\n    var lyric = new Lyric([lyricTxts], document.querySelector('#gc'), {});\r\n    lyric.bind(player);\r\n    let nullText = 0;\r\n    player.on('lyricUpdate', (res) => {\r\n      if (res.lyric === '\\n') {\r\n        nullText++;\r\n      }\r\n    });\r\n\r\n    player.on('playing', function () {\r\n      lyric.show();\r\n      player.mode = 2;\r\n    });\r\n\r\n    return () => {};\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div id=\"allLive\" className=\"liveContainer\">\r\n        <div id=\"album\"></div>\r\n        <div id=\"info\">\r\n          歌曲名称\r\n          <div>歌手：xxx</div>\r\n          <div>专辑：xxxxx </div>\r\n        </div>\r\n        <div className=\"select\"></div>\r\n        <div id=\"canvas\">\r\n          <canvas width=\"550\" height=\"110\"></canvas>\r\n        </div>\r\n        <div id=\"mask\">\r\n          <div id=\"gc\"></div>\r\n        </div>\r\n        <div id=\"player\"></div>\r\n      </div>\r\n      <div className=\"opearte\">\r\n        <Input\r\n          onChange={(e) => {\r\n            setMusicUrl(e.target.value);\r\n          }}\r\n          style={{ width: '400px', marginLeft: '10px', marginRight: '5px' }}\r\n          addonBefore=\"替换音频地址:\"\r\n          value={musicUrl}\r\n        />\r\n        <Button onClick={ChangeMusic} type=\"primary\">\r\n          替换\r\n        </Button>\r\n      </div>\r\n      <div className=\"tipInfo\">\r\n        <a href=\"http://music.163.com/song/media/outer/url?id=447925558.mp3\" rel=\"noopener noreferrer\" target=\"_blank\">\r\n          获取视频测试地址，获取后输入上方框\r\n        </a>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"sourceRoot":""}