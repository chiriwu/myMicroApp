{"version":3,"sources":["../node_modules/xgplayer/es/index.js","../node_modules/xgplayer-music/es/_virtual/_rollupPluginBabelHelpers.js","../node_modules/xgplayer-music/es/lyric.js","../node_modules/xgplayer-music/es/xhr.js","../node_modules/xgplayer-music/es/music.js","../node_modules/xgplayer-music/es/plugins/musicCover.js","../node_modules/xgplayer-music/es/plugins/musicBackward.js","../node_modules/xgplayer-music/es/plugins/musicPrev.js","../node_modules/xgplayer-music/es/plugins/musicForward.js","../node_modules/xgplayer-music/es/plugins/musicNext.js","../node_modules/xgplayer-music/es/plugins/musicMeta.js","../node_modules/xgplayer-music/es/preset.js","../node_modules/xgplayer-music/es/analyze/helper.js","../node_modules/xgplayer-music/es/analyze/drawWaves.js","../node_modules/xgplayer-music/es/analyze/render.js","../node_modules/xgplayer-music/es/analyze/drawBars.js","../node_modules/xgplayer-music/es/analyze/drawVertlines.js","../node_modules/xgplayer-music/es/analyze/drawLightning.js","../node_modules/xgplayer-music/es/analyze/drawDoubleline.js","../node_modules/xgplayer-music/es/analyze/drawDoubleBars.js","../node_modules/xgplayer-music/es/analyze/index.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_toPropertyKey","_createClass","protoProps","staticProps","prototype","obj","value","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","bind","o2","__proto__","p","p2","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","call","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_isNativeReflectConstruct","result","Super","NewTarget","this","arg","input","hint","prim","Symbol","toPrimitive","res","String","Number","_toPrimitive","LyricTime","LyricTime2","timeTxt","regRule","test","time","RegExp","$1","$2","$3","Lyric","Lyric2","txts","dom","_this","rawTxts","map","item","replace","match","isDynamics","idx","concat","isDynamic","some","__ainimateInterval__","__offset__","__offsetScale__","lists","txt","index","reg","lyric","list","reduce","pre","cur","line","get","set","val","j","k","len","sep","curTime","interval","offset","_ref","idxy","player","_this2","__player__","__handle__","f","find","currentTime","emit","on","__startHandle__","once","off","_this3","lyrbicTxts","ev","nodeType","lrcWrap","Util","createDom","appendChild","innerHTML","join","lrcForward","addEventListener","preventDefault","stopPropagation","offsetScale","console","log","lrcBack","__updateHandle__","activeTop","domWrap","querySelector","activeDom","offsetHeight","className","getBoundingClientRect","top","scrollTop","Xhr","Xhr2","url","callback","xhr","window","XMLHttpRequest","responseType","open","onload","status","Function","response","onerror","run","abort","readyState","send","PLAY_MODES","ORDER","SLOOP","LOOP","RANDOM","_randomIndex","min","max","Math","floor","random","Music","_BasePlugin","Music2","_super","_len","args","Array","_key","mode","pause","change","next","abCycle","config","_initABCycle","_assertThisInitialize","halfPass","duration","confirmOrder","c","_end","end","loop","start","playerConfig","addClass","root","nextIndex","prevIndex","history","disable","src","poster","title","vid","_curInfo","Events","TIME_UPDATE","_onTimeUpdate","ENDED","_onEnded","DURATION_CHANGE","_onDurationChange","offline","checkOffline","then","data","code","state","catch","removeClass","_p","plugins","progresspreview","_start","dot","id","playerId","text","color","findDot","updateDot","createDot","deleteDot","_i","_nextCompute","_prevCompute","timeScale","meta","every","splice","ext","typeof","removeAbCycle","offlineVid","playNext","autoplay","_emitChange","play","Promise","resolve","reject","database","openDB","getDataByKey","myDB","ojstore","name","setTimeout","closeDB","URL","createObjectURL","blob","preloadNext","preload","_item","addData","Blob","type","scale","BasePlugin","MusicCover","_Plugin","MusicCover2","_img2","Image","show","hide","_img","position","Plugin","POSITIONS","CONTROLS_LEFT","MusicBackward","MusicBackward2","music","backward","initIcons","onClick","musicBackward","icon","class","icons","unbind","MusicPrev","MusicPrev2","prev","musicPrev","MusicForward","MusicForward2","forward","musicForward","MusicNext","MusicNext2","musicNext","MusicMeta","MusicMeta2","progress","MusicPreset","MusicPreset2","options","typeOf","controls","initShow","_c","marginControls","mediaType","initMusicConfig","ignores","getGradient","ctx","w","colors","gradient","createLinearGradient","per","addColorStop","drawPath","dataArray","bufferLen","linear","reverse","save","beginPath","sliceWidth","strokeStyle","x","y","moveTo","lineTo","stroke","modeMap","bars","context","h","count","percent","parseInt","clearRect","fillStyle","bgColor","fillRect","barHeight","step","barWidth","vertLines","increase","point","lightning","doubleLine","mid","doubleBars","waves","size","rtn","temp","track","split","scalePercent","splitAt","arraySection","slice","middle","shrink","frameRateMap","MODES","BARS","VERT_LINES","LIGHTNING","DOUBLE_LINE","DOUBLE_BARS","WAVES","render","canvas","frame","getContext","height","width","lineWidth","Analyze","Analyze2","reqId","_renderFrame","cancelAnimationFrame","_audioCtx","close","gainNode","gain","setValueAtTime","volume","requestAnimationFrame","frameCount","analyser","getByteTimeDomainData","getByteFrequencyData","_this$canvas$getBound","defaultConfig","AudioCtx","audioCtx","createAnalyser","createGain","createMediaElementSource","video","connect","fftSize","isGradient","destination","_initPlayerEvents","_onoVolumechange","_onDestroy","stop","frequencyBinCount","Uint8Array","AudioContext","webkitAudioContext"],"mappings":"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","file":"static/js/5.c49a86fa.chunk.js","sourcesContent":["export { default as SimplePlayer } from \"./player.js\";\nexport { default as Plugin } from \"./plugin/plugin.js\";\nexport { default as BasePlugin } from \"./plugin/basePlugin.js\";\nimport * as events from \"./events.js\";\nexport { events as Events };\nexport { default as STATE_CLASS } from \"./stateClassMap.js\";\nexport { default as I18N } from \"./lang/i18n.js\";\nexport { default as Errors } from \"./error.js\";\nexport { default as Sniffer } from \"./utils/sniffer.js\";\nexport { default as Util } from \"./utils/util.js\";\nexport { default } from \"./index.umd.js\";\nexport { STATES } from \"./state.js\";\nexport { default as DefaultPresetEn } from \"./presets/default-en.js\";\nexport { default as DefaultPreset } from \"./presets/default.js\";\nexport { default as LivePreset } from \"./presets/live.js\";\nexport { default as MobilePreset } from \"./presets/mobile.js\";\nexport { default as langZhHk } from \"./lang/zh-hk.js\";\nexport { default as langJp } from \"./lang/jp.js\";\nexport { default as langZhCn } from \"./lang/zh-cn.js\";\nexport { default as Danmu } from \"./plugins/danmu/index.js\";\nexport { default as TextTrack } from \"./plugins/track/index.js\";\nexport { default as DanmuIcon } from \"./plugins/danmu/danmuIcon.js\";\nexport { default as DanmuPanel } from \"./plugins/danmu/danmuPanel.js\";\n","function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function(sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), true).forEach(function(key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function(key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor)\n      descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps)\n    _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps)\n    _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass)\n    _setPrototypeOf(subClass, superClass);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf2(o2) {\n    return o2.__proto__ || Object.getPrototypeOf(o2);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf2(o2, p2) {\n    o2.__proto__ = p2;\n    return o2;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false;\n  if (Reflect.construct.sham)\n    return false;\n  if (typeof Proxy === \"function\")\n    return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {\n    }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived), result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null)\n    return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== void 0) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\")\n      return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nexport { _assertThisInitialized as assertThisInitialized, _classCallCheck as classCallCheck, _createClass as createClass, _createSuper as createSuper, _defineProperty as defineProperty, _getPrototypeOf as getPrototypeOf, _inherits as inherits, _isNativeReflectConstruct as isNativeReflectConstruct, _objectSpread2 as objectSpread2, _possibleConstructorReturn as possibleConstructorReturn, _setPrototypeOf as setPrototypeOf, _toPrimitive as toPrimitive, _toPropertyKey as toPropertyKey };\n","import { createClass as _createClass, classCallCheck as _classCallCheck } from \"./_virtual/_rollupPluginBabelHelpers.js\";\nimport { Util } from \"xgplayer\";\nvar LyricTime = /* @__PURE__ */ _createClass(function LyricTime2(timeTxt) {\n  _classCallCheck(this, LyricTime2);\n  this.regRule = /(\\d{2}(?=:)):(\\d{2}(?=\\.))\\.(\\d{2,3})/g;\n  if (this.regRule.test(timeTxt)) {\n    this.time = RegExp.$1 * 60 + RegExp.$2 * 1 + (\"0.\" + RegExp.$3) * 1;\n  } else {\n    this.time = -1;\n  }\n});\nvar Lyric = /* @__PURE__ */ function() {\n  function Lyric2(txts, dom) {\n    var _this = this;\n    _classCallCheck(this, Lyric2);\n    this.rawTxts = txts;\n    this.txts = txts.map(function(item) {\n      return item.replace(/^[\\r\\n]|[\\r\\n]$/g, \"\").match(/(\\[.*\\])[^[]+/g);\n    });\n    this.isDynamics = txts.map(function(item, idx) {\n      return [].concat(item.match(/\\[\\d{2}:\\d{2}\\.\\d{2,3}\\]/g)).length === _this.txts[idx].length && _this.txts[idx].length === _this.txts[0].length && _this.txts[idx].length > 1;\n    });\n    this.isDynamic = this.isDynamics.some(function(item) {\n      return item;\n    });\n    this.__ainimateInterval__ = 0;\n    this.__offset__ = 0;\n    this.__offsetScale__ = 0.5;\n    this.dom = dom;\n    this.lists = [];\n    this.isDynamics.map(function(item, idx) {\n      if (item) {\n        _this.lists.push(_this.txts[idx].map(function(txt, index) {\n          var reg = /(\\[[\\d:\\S]+\\])([^[]+)/g.test(txt);\n          var time = RegExp.$1;\n          var lyric = RegExp.$2;\n          return {\n            time: reg ? new LyricTime(time).time : -1,\n            lyric,\n            idx: index\n          };\n        }));\n      }\n    });\n    this.list = this.lists.reduce(function(pre, cur) {\n      return pre.map(function(item, idx) {\n        return {\n          time: item.time,\n          lyric: item.lyric === \"\\n\" ? \"\".concat(item.lyric).concat(cur[idx].lyric) : \"\".concat(item.lyric, \"<br/>\").concat(cur[idx].lyric),\n          idx\n        };\n      });\n    });\n    this.line = 0;\n  }\n  _createClass(Lyric2, [{\n    key: \"interval\",\n    get: function get() {\n      return this.__ainimateInterval__;\n    },\n    set: function set(val) {\n      this.__ainimateInterval__ = val;\n    }\n  }, {\n    key: \"offset\",\n    get: function get() {\n      return this.__offset__;\n    },\n    set: function set(val) {\n      this.__offset__ = val;\n    }\n  }, {\n    key: \"offsetScale\",\n    get: function get() {\n      return this.__offsetScale__;\n    },\n    set: function set(val) {\n      this.__offsetScale__ = val;\n    }\n  }, {\n    key: \"adjust\",\n    value: function adjust() {\n      var list = this.list;\n      for (var i = 0, j, k, len = list.length; i < len; i++) {\n        for (j = i + 1; j < len; j++) {\n          if (list[j].time > list[i].time) {\n            break;\n          }\n        }\n        if (j < len) {\n          var sep = (list[j].time - list[i].time) / (j - i);\n          for (k = i + 1; k < j; k++) {\n            list[k].time = list[k - 1].time + sep;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"find\",\n    value: function find(curTime) {\n      var list = this.list;\n      var interval = this.__ainimateInterval__;\n      var offset = this.__offset__;\n      curTime = curTime + offset > 0 ? curTime + offset : 0;\n      return list.filter(function(_ref, idx) {\n        var time = _ref.time;\n        var idxy = idx + 1;\n        return curTime >= time && (list[idxy] && curTime * 1 + interval * 1 <= list[idxy].time || idxy >= list.length);\n      });\n    }\n  }, {\n    key: \"bind\",\n    value: function bind(player) {\n      var _this2 = this;\n      var self = this;\n      this.__player__ = player;\n      if (self.isDynamic) {\n        self.__handle__ = function() {\n          var f = _this2.find(player.currentTime)[0];\n          if (f && f.idx !== _this2.line) {\n            _this2.line = f.idx;\n            player.emit(\"lyricUpdate\", f);\n          }\n        }.bind(self, player);\n        player.on(\"timeupdate\", self.__handle__);\n        self.__startHandle__ = function() {\n          player.emit(\"lyricUpdate\", self.list[0]);\n        }.bind(self, player);\n        player.once(\"playing\", self.__startHandle__);\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(player) {\n      delete this.__player__;\n      if (this.__handle__) {\n        player.off(\"lyricUpdate\", this.__handle__);\n        delete this.__handle__;\n      }\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var _this3 = this;\n      var dom = this.dom;\n      var lyrbicTxts = [];\n      var self = this;\n      var ev = [\"click\", \"touchstart\"];\n      if (dom && dom.nodeType === 1) {\n        var lrcWrap = Util.createDom(\"div\", \"<div></div>\", {}, \"xgplayer-lrcWrap\");\n        dom.appendChild(lrcWrap);\n        this.list.forEach(function(item) {\n          lyrbicTxts.push('<xg-lyric-item class=\"xgplayer-lyric-item\" data-idx=\"'.concat(item.idx, '\">').concat(item.lyric.replace(/[\\r\\n]/g, \"\"), \"</xg-lyric-item>\"));\n        });\n        lrcWrap.innerHTML = lyrbicTxts.join(\"\");\n        var lrcForward = Util.createDom(\"xg-lrcForward\", \"<div></div>\", {}, \"xgplayer-lrcForward\");\n        dom.appendChild(lrcForward);\n        ev.forEach(function(item) {\n          lrcForward.addEventListener(item, function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            self.offset -= self.offsetScale;\n            console.log(\"lyric go forward \".concat(self.offsetScale, \"s\"));\n          }, false);\n        });\n        var lrcBack = Util.createDom(\"xg-lrcBack\", \"<div></div>\", {}, \"xgplayer-lrcBack\");\n        dom.appendChild(lrcBack);\n        ev.forEach(function(item) {\n          lrcBack.addEventListener(item, function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            self.offset += self.offsetScale;\n            console.log(\"lyric go back \".concat(self.offsetScale, \"s\"));\n          }, false);\n        });\n        this.__updateHandle__ = function(item) {\n          var domWrap = _this3.dom.querySelector(\".xgplayer-lrcWrap\");\n          var activeDom = domWrap.querySelector(\".xgplayer-lyric-item-active\");\n          var offsetHeight = domWrap.offsetHeight;\n          var activeTop;\n          if (activeDom) {\n            activeDom.className = \"xgplayer-lyric-item\";\n          }\n          activeDom = domWrap.querySelector('.xgplayer-lyric-item[data-idx=\"'.concat(item.idx, '\"]'));\n          if (activeDom) {\n            activeDom.className = \"xgplayer-lyric-item xgplayer-lyric-item-active\";\n            activeTop = activeDom.getBoundingClientRect().top - domWrap.getBoundingClientRect().top + domWrap.scrollTop - offsetHeight / 2;\n            if (activeTop) {\n              domWrap.scrollTop = activeTop;\n            }\n          }\n        };\n        this.__player__.on(\"lyricUpdate\", this.__updateHandle__);\n      } else {\n        this.__player__.emit(\"error\", \"lyric container can not be empty\");\n      }\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.__updateHandle__.off(\"lyricUpdate\", this.__updateHandle__);\n    }\n  }]);\n  return Lyric2;\n}();\nexport { LyricTime, Lyric as default };\n","import { createClass as _createClass, classCallCheck as _classCallCheck } from \"./_virtual/_rollupPluginBabelHelpers.js\";\nvar Xhr = /* @__PURE__ */ function() {\n  function Xhr2(url, callback) {\n    _classCallCheck(this, Xhr2);\n    this.url = url;\n    var xhr = new window.XMLHttpRequest();\n    xhr.target = this;\n    xhr.responseType = \"arraybuffer\";\n    xhr.open(\"get\", url);\n    xhr.onload = function() {\n      if (xhr.status === 200 || xhr.status === 206) {\n        if (callback && callback instanceof Function) {\n          callback(xhr.response);\n        }\n      }\n    };\n    xhr.onerror = function(e) {\n    };\n    this.xhr = xhr;\n    this.run();\n  }\n  _createClass(Xhr2, [{\n    key: \"cancel\",\n    value: function cancel() {\n      this.xhr.abort();\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      if (this.xhr.readyState === 1) {\n        this.xhr.send();\n      }\n    }\n  }]);\n  return Xhr2;\n}();\nexport { Xhr as default };\n","import { inherits as _inherits, createSuper as _createSuper, createClass as _createClass, classCallCheck as _classCallCheck, defineProperty as _defineProperty, assertThisInitialized as _assertThisInitialized, objectSpread2 as _objectSpread2 } from \"./_virtual/_rollupPluginBabelHelpers.js\";\nimport { Util, Events, BasePlugin } from \"xgplayer\";\nimport Xhr from \"./xhr.js\";\nvar PLAY_MODES = {\n  ORDER: \"order\",\n  SLOOP: \"sloop\",\n  LOOP: \"loop\",\n  RANDOM: \"random\"\n};\nvar CLASS_NAME = \"xgplayer-music\";\nfunction _randomIndex(min, max, index) {\n  var i = Math.floor(Math.random() * (max - min) + min);\n  if (i === index) {\n    if (i > max / 2) {\n      max = max / 2;\n    } else {\n      min = max / 2;\n    }\n    return max - min > 2 ? _randomIndex(min, max, index) : i;\n  } else {\n    return i;\n  }\n}\nvar Music = /* @__PURE__ */ function(_BasePlugin) {\n  _inherits(Music2, _BasePlugin);\n  var _super = _createSuper(Music2);\n  function Music2() {\n    var _this;\n    _classCallCheck(this, Music2);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"_onEnded\", function() {\n      if (_this.mode === \"order\" && _this.index + 1 >= _this.list.length) {\n        _this.player.pause();\n        _this.player.currentTime = 0;\n        return;\n      }\n      switch (_this.mode) {\n        case PLAY_MODES.SLOOP:\n          _this.change();\n          break;\n        case PLAY_MODES.ORDER:\n        case PLAY_MODES.LOOP:\n        default:\n          _this.next();\n          break;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_onDurationChange\", function() {\n      var abCycle = _this.config.abCycle;\n      _this._initABCycle(abCycle, _this.player);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"_onTimeUpdate\", function() {\n      var _assertThisInitialize = _assertThisInitialized(_this), config = _assertThisInitialize.config, player = _assertThisInitialize.player;\n      if (!_this.halfPass && player.currentTime > player.duration / 2) {\n        _this.confirmOrder();\n      }\n      if (config.abCycle) {\n        var c = config.abCycle;\n        var _end = c.end > player.duration ? player.duration : c.end;\n        if (player.currentTime >= _end) {\n          if (!c.loop) {\n            player.pause();\n            _this.emit(\"abCycle_ended\");\n          }\n          player.currentTime = c.start || 0;\n        } else if (player.currentTime < c.start) {\n          player.currentTime = c.start || 0;\n        }\n      }\n    });\n    return _this;\n  }\n  _createClass(Music2, [{\n    key: \"afterCreate\",\n    value: function afterCreate() {\n      var player = this.player, playerConfig = this.playerConfig;\n      Util.addClass(player.root, CLASS_NAME);\n      this.halfPass = false;\n      this.list = this.config.list || [];\n      this.nextIndex = -1;\n      this.prevIndex = -1;\n      this.history = [];\n      this.disable = !(this.list.length > 0);\n      if (this.list.length === 0) {\n        return;\n      }\n      if (!playerConfig.url && this.list.length > 0) {\n        playerConfig.url = this.list[0].src;\n      }\n      if (!playerConfig.poster) {\n        playerConfig.poster = this.list[0].poster;\n      }\n      if (!playerConfig.title) {\n        playerConfig.title = this.list[0].title || \"\";\n      }\n      if (!playerConfig.vid) {\n        playerConfig.vid = this.list[0].vid || \"\";\n      }\n      this._curInfo = {\n        src: playerConfig.url,\n        poster: playerConfig.poster,\n        title: playerConfig.title,\n        vid: playerConfig.vid\n      };\n      this.index = 0;\n      this.on(Events.TIME_UPDATE, this._onTimeUpdate);\n      this.on(Events.ENDED, this._onEnded);\n      this.on(Events.DURATION_CHANGE, this._onDurationChange);\n      if (this.config.offline) {\n        this.checkOffline(this._curInfo.src, this._curInfo.vid).then(function(data) {\n          if (data.code === 0) {\n            playerConfig.url = data.url;\n            if (player.state >= 4) {\n              player.src = data.url;\n            }\n          }\n        }).catch(function(e) {\n        });\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      Util.removeClass(this.player.root, CLASS_NAME);\n    }\n  }, {\n    key: \"_nextCompute\",\n    value: function _nextCompute() {\n      if (this.disable) {\n        return;\n      }\n      switch (this.mode) {\n        case PLAY_MODES.SLOOP:\n        case PLAY_MODES.ORDER:\n        case PLAY_MODES.LOOP:\n          if (this.index + 1 < this.list.length) {\n            this.nextIndex = this.index + 1;\n          } else {\n            this.nextIndex = 0;\n          }\n          break;\n        default:\n          this.nextIndex = _randomIndex(0, this.list.length, this.index);\n          break;\n      }\n    }\n  }, {\n    key: \"_prevCompute\",\n    value: function _prevCompute() {\n      if (this.disable) {\n        return;\n      }\n      switch (this.mode) {\n        case PLAY_MODES.SLOOP:\n        case PLAY_MODES.ORDER:\n        case PLAY_MODES.LOOP:\n          if (this.index - 1 >= 0) {\n            this.prevIndex = this.index - 1;\n          } else {\n            this.prevIndex = this.list.length - 1;\n          }\n          break;\n        default:\n          this.prevIndex = _randomIndex(0, this.list.length, this.index);\n          break;\n      }\n    }\n  }, {\n    key: \"_emitChange\",\n    value: function _emitChange() {\n      this.emit(\"change\", this._curInfo);\n    }\n  }, {\n    key: \"_initABCycle\",\n    value: function _initABCycle(abCycle, player) {\n      var _p = player.plugins.progresspreview;\n      if (abCycle && player) {\n        var _end = abCycle.end > this.player.duration ? this.player.duration : abCycle.end;\n        var _start = abCycle.start > this.player.duration ? 0 : abCycle.start;\n        var dot = {\n          id: player.playerId,\n          time: abCycle.start,\n          duration: _end - _start,\n          text: abCycle.text,\n          color: abCycle.color\n        };\n        _p.findDot(dot.id) ? _p.updateDot(dot) : _p.createDot(dot);\n      } else {\n        _p.findDot(player.playerId) ? _p.deleteDot(player.playerId) : \"\";\n      }\n    }\n  }, {\n    key: \"random\",\n    value: function random() {\n      if (this.list.length < 0) {\n        return null;\n      }\n      var _i = _randomIndex(0, this.list.length, this.index);\n      return this.list[_i];\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      if (this.disable) {\n        return;\n      }\n      if (!this.halfPass) {\n        this.halfPass = true;\n        this._nextCompute();\n      }\n      this.index = this.nextIndex;\n      this.change();\n    }\n  }, {\n    key: \"prev\",\n    value: function prev() {\n      if (this.disable) {\n        return;\n      }\n      if (!this.halfPass) {\n        this.halfPass = true;\n        this._prevCompute();\n      }\n      this.index = this.prevIndex;\n      this.change();\n    }\n  }, {\n    key: \"forward\",\n    value: function forward() {\n      var player = this.player;\n      var timeScale = this.config.timeScale;\n      player.currentTime = player.currentTime + timeScale < player.duration ? player.currentTime + timeScale : player.duration - 0.1;\n    }\n  }, {\n    key: \"backward\",\n    value: function backward() {\n      var player = this.player;\n      var timeScale = this.config.timeScale;\n      player.currentTime = player.currentTime - timeScale > 0 ? player.currentTime - timeScale : 0;\n    }\n  }, {\n    key: \"add\",\n    value: function add(meta) {\n      this.list.push({\n        src: meta.src,\n        title: meta.title,\n        vid: meta.vid,\n        poster: meta.poster\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(vid) {\n      var idx = -1;\n      this.list.every(function(item, index) {\n        if (item.vid === vid) {\n          idx = index;\n          return false;\n        } else {\n          return true;\n        }\n      });\n      if (idx > -1) {\n        this.list.splice(idx, 1);\n      }\n    }\n  }, {\n    key: \"setAbCycle\",\n    value: function setAbCycle(start, end, loop) {\n      var ext = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};\n      if (start && Util.typeof(start) === \"Object\") {\n        this.config.abCycle = _objectSpread2({}, start);\n      } else {\n        this.config.abCycle = _objectSpread2({\n          start: start || 0,\n          end: end || this.player.duration,\n          loop\n        }, ext);\n      }\n      this._initABCycle(this.config.abCycle, this.player);\n    }\n  }, {\n    key: \"removeAbCycle\",\n    value: function removeAbCycle() {\n      this.config.abCycle = null;\n      this._initABCycle(null, this.player);\n    }\n  }, {\n    key: \"updateList\",\n    value: function updateList() {\n      var list = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];\n      this.removeAbCycle();\n      this.player.pause();\n      this.player.currentTime = 0;\n      this.list = list;\n      this.nextIndex = 0;\n      this.index = 0;\n      this.change();\n    }\n  }, {\n    key: \"setIndex\",\n    value: function setIndex() {\n      var index = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;\n      if (index < 0 || index >= this.list.length) {\n        return;\n      }\n      this.nextIndex = index;\n      this.index = index;\n      this.change();\n    }\n  }, {\n    key: \"change\",\n    value: function change() {\n      var _this2 = this;\n      if (this.disable) {\n        return;\n      }\n      var player = this.player, list = this.list, index = this.index;\n      var offlineVid = list[index].vid;\n      this.halfPass = false;\n      this.checkOffline(list[index].src, offlineVid).then(function(data) {\n        _this2._curInfo = {\n          title: _this2.list[_this2.index].title || \"\",\n          vid: _this2.list[_this2.index].vid,\n          poster: _this2.list[_this2.index].poster || \"\",\n          src: data.url\n        };\n        player.playNext({\n          url: data.url,\n          vid: _this2.list[_this2.index].vid || 0,\n          poster: _this2.list[_this2.index].poster || \"\",\n          autoplay: true\n        });\n        player.off(\"timeupdate\", _this2._emitChange);\n        player.once(\"timeupdate\", _this2._emitChange);\n        player.play();\n      });\n    }\n  }, {\n    key: \"checkOffline\",\n    value: function checkOffline(url, offlineVid) {\n      var _this3 = this;\n      return new Promise(function(resolve, reject) {\n        if (!_this3.config.offline || _this3.disable) {\n          resolve({\n            url,\n            code: -1,\n            vid: offlineVid\n          });\n        }\n        var database = _this3.player.database;\n        database.openDB(function() {\n          database.getDataByKey(database.myDB.ojstore.name, offlineVid, function(result) {\n            setTimeout(function() {\n              database.closeDB();\n            }, 5e3);\n            if (result) {\n              resolve({\n                url: URL.createObjectURL(result.blob),\n                code: 0,\n                vid: result.vid\n              });\n            } else {\n              resolve({\n                url,\n                code: -2,\n                vid: offlineVid\n              });\n            }\n          });\n        });\n      });\n    }\n  }, {\n    key: \"confirmOrder\",\n    value: function confirmOrder() {\n      this.halfPass = true;\n      this._nextCompute();\n      this._prevCompute();\n      if (this.config.preloadNext) {\n        this.preload(this.nextIndex);\n      }\n    }\n  }, {\n    key: \"preload\",\n    value: function preload(index) {\n      if (index < 0 || index >= this.list.length) {\n        return;\n      }\n      var _item = this.list[index];\n      var player = this.player;\n      this.checkOffline(_item.src, _item.vid).then(function(data) {\n        if (data.code === -2) {\n          var offlineVid = _item.vid;\n          new Xhr(_item.src, function(res) {\n            player.database.openDB(function() {\n              player.database.addData(player.database.myDB.ojstore.name, [{\n                vid: offlineVid,\n                blob: new Blob([res], {\n                  type: 'audio/mp4; codecs=\"mp4a.40.5\"'\n                })\n              }]);\n              setTimeout(function() {\n                player.database.closeDB();\n              }, 5e3);\n            });\n          });\n        }\n      });\n    }\n  }, {\n    key: \"timeScale\",\n    get: function get() {\n      return this.config.timeScale || 15;\n    },\n    set: function set(scale) {\n      this.config.timeScale = scale;\n    }\n  }, {\n    key: \"mode\",\n    get: function get() {\n      return this.config.mode || PLAY_MODES.RANDOM;\n    },\n    set: function set(val) {\n      this.config.mode = val;\n    }\n  }], [{\n    key: \"pluginName\",\n    get: function get() {\n      return \"music\";\n    }\n  }, {\n    key: \"defaultConfig\",\n    get: function get() {\n      return {\n        offline: false,\n        preloadNext: true,\n        abCycle: null,\n        timeScale: 15,\n        mode: PLAY_MODES.ORDER,\n        list: []\n      };\n    }\n  }, {\n    key: \"ModeType\",\n    get: function get() {\n      return Object.keys(PLAY_MODES).map(function(key) {\n        return PLAY_MODES[key];\n      });\n    }\n  }]);\n  return Music2;\n}(BasePlugin);\nexport { Music as default };\n","import { inherits as _inherits, createSuper as _createSuper, createClass as _createClass, classCallCheck as _classCallCheck } from \"../_virtual/_rollupPluginBabelHelpers.js\";\nimport { Plugin } from \"xgplayer\";\nvar MusicCover = /* @__PURE__ */ function(_Plugin) {\n  _inherits(MusicCover2, _Plugin);\n  var _super = _createSuper(MusicCover2);\n  function MusicCover2() {\n    _classCallCheck(this, MusicCover2);\n    return _super.apply(this, arguments);\n  }\n  _createClass(MusicCover2, [{\n    key: \"afterCreate\",\n    value: function afterCreate() {\n      var _this = this;\n      this.on(\"change\", function(item) {\n        if (item && item.poster) {\n          if (_this.find(\"img\")) {\n            _this.find(\"img\").src = item.poster;\n          } else {\n            var _img2 = new Image();\n            _img2.src = item.poster;\n            _this.appendChild(_img2);\n          }\n          _this.find(\"img\").src = item.poster;\n          _this.show();\n        } else {\n          _this.hide();\n        }\n      });\n      if (this.playerConfig.poster) {\n        var _img = new Image();\n        _img.src = this.playerConfig.poster;\n        this.appendChild(_img);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return '<xg-icon class=\"xgplayer-cover\"></xg-icon>';\n    }\n  }], [{\n    key: \"pluginName\",\n    get: function get() {\n      return \"musiccover\";\n    }\n  }, {\n    key: \"defaultConfig\",\n    get: function get() {\n      return {\n        index: 6,\n        position: Plugin.POSITIONS.CONTROLS_LEFT\n      };\n    }\n  }]);\n  return MusicCover2;\n}(Plugin);\nexport { MusicCover };\n","import { inherits as _inherits, createSuper as _createSuper, createClass as _createClass, classCallCheck as _classCallCheck, defineProperty as _defineProperty, assertThisInitialized as _assertThisInitialized } from \"../_virtual/_rollupPluginBabelHelpers.js\";\nimport { Plugin } from \"xgplayer\";\nvar MusicBackward = /* @__PURE__ */ function(_Plugin) {\n  _inherits(MusicBackward2, _Plugin);\n  var _super = _createSuper(MusicBackward2);\n  function MusicBackward2() {\n    var _this;\n    _classCallCheck(this, MusicBackward2);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function(e) {\n      var _assertThisInitialize = _assertThisInitialized(_this), player = _assertThisInitialize.player;\n      e.preventDefault();\n      e.stopPropagation();\n      player.plugins.music.backward();\n    });\n    return _this;\n  }\n  _createClass(MusicBackward2, [{\n    key: \"afterCreate\",\n    value: function afterCreate() {\n      var _this2 = this;\n      this.initIcons();\n      var ev = [\"click\", \"touchstart\"];\n      ev.forEach(function(item) {\n        _this2.bind(item, _this2.onClick);\n      });\n    }\n  }, {\n    key: \"registerIcons\",\n    value: function registerIcons() {\n      return {\n        musicBackward: {\n          icon: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"-2 0 21 15\">\\n      <path d=\"m 14,2.99996 0,10 -7,-5 7,-5 z m -7,5 0,5 -7,-5 7,-5 0,5 z m -7,0 0,0 z\"></path>\\n  </svg>',\n          class: \"xg-icon-mbackward\"\n        }\n      };\n    }\n  }, {\n    key: \"initIcons\",\n    value: function initIcons() {\n      var icons = this.icons;\n      this.appendChild(\".xgplayer-icon\", icons.musicBackward);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this3 = this;\n      var ev = [\"click\", \"touchstart\"];\n      ev.forEach(function(item) {\n        _this3.unbind(item, _this3.onClick);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return '<xg-icon class=\"xgplayer-backward\">\\n            <div class=\"xgplayer-icon\">\\n            </div>\\n          </xg-icon>';\n    }\n  }], [{\n    key: \"pluginName\",\n    get: function get() {\n      return \"musicbackward\";\n    }\n  }, {\n    key: \"defaultConfig\",\n    get: function get() {\n      return {\n        index: 1,\n        position: Plugin.POSITIONS.CONTROLS_LEFT\n      };\n    }\n  }]);\n  return MusicBackward2;\n}(Plugin);\nexport { MusicBackward };\n","import { inherits as _inherits, createSuper as _createSuper, createClass as _createClass, classCallCheck as _classCallCheck, defineProperty as _defineProperty, assertThisInitialized as _assertThisInitialized } from \"../_virtual/_rollupPluginBabelHelpers.js\";\nimport { Plugin } from \"xgplayer\";\nvar MusicPrev = /* @__PURE__ */ function(_Plugin) {\n  _inherits(MusicPrev2, _Plugin);\n  var _super = _createSuper(MusicPrev2);\n  function MusicPrev2() {\n    var _this;\n    _classCallCheck(this, MusicPrev2);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function(e) {\n      var _assertThisInitialize = _assertThisInitialized(_this), player = _assertThisInitialize.player;\n      e.preventDefault();\n      e.stopPropagation();\n      player.plugins.music.prev();\n    });\n    return _this;\n  }\n  _createClass(MusicPrev2, [{\n    key: \"afterCreate\",\n    value: function afterCreate() {\n      var _this2 = this;\n      this.initIcons();\n      var ev = [\"click\", \"touchstart\"];\n      ev.forEach(function(item) {\n        _this2.bind(item, _this2.onClick);\n      });\n    }\n  }, {\n    key: \"registerIcons\",\n    value: function registerIcons() {\n      return {\n        musicPrev: {\n          icon: ' <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"32\" viewBox=\"300 200 1024 1024\">\\n        <path d=\"M600 1140v-768h128v352l320-320v704l-320-320v352zz\"></path>\\n    </svg>',\n          class: \"xg-icon-mprev\"\n        }\n      };\n    }\n  }, {\n    key: \"initIcons\",\n    value: function initIcons() {\n      var icons = this.icons;\n      this.appendChild(\".xgplayer-icon\", icons.musicPrev);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this3 = this;\n      var ev = [\"click\", \"touchstart\"];\n      ev.forEach(function(item) {\n        _this3.unbind(item, _this3.onClick);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return '<xg-icon class=\"xgplayer-next\">\\n            <div class=\"xgplayer-icon\">\\n            </div>\\n          </xg-icon>';\n    }\n  }], [{\n    key: \"pluginName\",\n    get: function get() {\n      return \"musicprev\";\n    }\n  }, {\n    key: \"defaultConfig\",\n    get: function get() {\n      return {\n        index: 2,\n        position: Plugin.POSITIONS.CONTROLS_LEFT\n      };\n    }\n  }]);\n  return MusicPrev2;\n}(Plugin);\nexport { MusicPrev };\n","import { inherits as _inherits, createSuper as _createSuper, createClass as _createClass, classCallCheck as _classCallCheck, defineProperty as _defineProperty, assertThisInitialized as _assertThisInitialized } from \"../_virtual/_rollupPluginBabelHelpers.js\";\nimport { Plugin } from \"xgplayer\";\nvar MusicForward = /* @__PURE__ */ function(_Plugin) {\n  _inherits(MusicForward2, _Plugin);\n  var _super = _createSuper(MusicForward2);\n  function MusicForward2() {\n    var _this;\n    _classCallCheck(this, MusicForward2);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function(e) {\n      var _assertThisInitialize = _assertThisInitialized(_this), player = _assertThisInitialize.player;\n      e.preventDefault();\n      e.stopPropagation();\n      player.plugins.music.forward();\n    });\n    return _this;\n  }\n  _createClass(MusicForward2, [{\n    key: \"afterCreate\",\n    value: function afterCreate() {\n      var _this2 = this;\n      this.initIcons();\n      var ev = [\"click\", \"touchstart\"];\n      ev.forEach(function(item) {\n        _this2.bind(item, _this2.onClick);\n      });\n    }\n  }, {\n    key: \"registerIcons\",\n    value: function registerIcons() {\n      return {\n        musicForward: {\n          icon: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"-2 0 21 15\">\\n        <path d=\"m 2,2.99996 0,10 7,-5 -7,-5 z m 7,5 0,5 7,-5 -7,-5 0,5 z m 7,0 0,0 z\"></path>\\n      </svg>',\n          class: \"xg-icon-mforward\"\n        }\n      };\n    }\n  }, {\n    key: \"initIcons\",\n    value: function initIcons() {\n      var icons = this.icons;\n      this.appendChild(\".xgplayer-icon\", icons.musicForward);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this3 = this;\n      var ev = [\"click\", \"touchstart\"];\n      ev.forEach(function(item) {\n        _this3.unbind(item, _this3.onClick);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return '<xg-icon class=\"xgplayer-forward\">\\n            <div class=\"xgplayer-icon\">\\n            </div>\\n          </xg-icon>';\n    }\n  }], [{\n    key: \"pluginName\",\n    get: function get() {\n      return \"musicforward\";\n    }\n  }, {\n    key: \"defaultConfig\",\n    get: function get() {\n      return {\n        index: 5,\n        position: Plugin.POSITIONS.CONTROLS_LEFT\n      };\n    }\n  }]);\n  return MusicForward2;\n}(Plugin);\nexport { MusicForward };\n","import { inherits as _inherits, createSuper as _createSuper, createClass as _createClass, classCallCheck as _classCallCheck, defineProperty as _defineProperty, assertThisInitialized as _assertThisInitialized } from \"../_virtual/_rollupPluginBabelHelpers.js\";\nimport { Plugin } from \"xgplayer\";\nvar MusicNext = /* @__PURE__ */ function(_Plugin) {\n  _inherits(MusicNext2, _Plugin);\n  var _super = _createSuper(MusicNext2);\n  function MusicNext2() {\n    var _this;\n    _classCallCheck(this, MusicNext2);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function(e) {\n      var _assertThisInitialize = _assertThisInitialized(_this), player = _assertThisInitialize.player;\n      e.preventDefault();\n      e.stopPropagation();\n      player.plugins.music.next();\n    });\n    return _this;\n  }\n  _createClass(MusicNext2, [{\n    key: \"afterCreate\",\n    value: function afterCreate() {\n      var _this2 = this;\n      this.initIcons();\n      var ev = [\"click\", \"touchstart\"];\n      ev.forEach(function(item) {\n        _this2.bind(item, _this2.onClick);\n      });\n    }\n  }, {\n    key: \"registerIcons\",\n    value: function registerIcons() {\n      return {\n        musicNext: {\n          icon: ' <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"32\" viewBox=\"100 200 1024 1024\">\\n        <path d=\"M800 380v768h-128v-352l-320 320v-704l320 320v-352z\">\\n      </svg>',\n          class: \"xg-icon-mnext\"\n        }\n      };\n    }\n  }, {\n    key: \"initIcons\",\n    value: function initIcons() {\n      var icons = this.icons;\n      this.appendChild(\".xgplayer-icon\", icons.musicNext);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this3 = this;\n      var ev = [\"click\", \"touchstart\"];\n      ev.forEach(function(item) {\n        _this3.unbind(item, _this3.onClick);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return '<xg-icon class=\"xgplayer-next\">\\n            <div class=\"xgplayer-icon\">\\n            </div>\\n          </xg-icon>';\n    }\n  }], [{\n    key: \"pluginName\",\n    get: function get() {\n      return \"musicnext\";\n    }\n  }, {\n    key: \"defaultConfig\",\n    get: function get() {\n      return {\n        index: 4,\n        position: Plugin.POSITIONS.CONTROLS_LEFT\n      };\n    }\n  }]);\n  return MusicNext2;\n}(Plugin);\nexport { MusicNext };\n","import { inherits as _inherits, createSuper as _createSuper, createClass as _createClass, classCallCheck as _classCallCheck } from \"../_virtual/_rollupPluginBabelHelpers.js\";\nimport { Plugin } from \"xgplayer\";\nvar MusicMeta = /* @__PURE__ */ function(_Plugin) {\n  _inherits(MusicMeta2, _Plugin);\n  var _super = _createSuper(MusicMeta2);\n  function MusicMeta2() {\n    _classCallCheck(this, MusicMeta2);\n    return _super.apply(this, arguments);\n  }\n  _createClass(MusicMeta2, [{\n    key: \"beforeCreate\",\n    value: function beforeCreate(args) {\n      var progress = args.player.plugins.progress;\n      if (progress) {\n        args.root = progress.root;\n      }\n    }\n  }, {\n    key: \"afterCreate\",\n    value: function afterCreate() {\n      var _this = this;\n      this.on(\"change\", function(item) {\n        if (item && item.title) {\n          _this.root.innerHTML = \"\".concat(item.title);\n        } else {\n          _this.root.innerHTML = \"\";\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var playerConfig = this.playerConfig;\n      return '<xg-title class=\"xgplayer-name\">\\n          '.concat(playerConfig.title || \"\", \"\\n       </xg-title>\");\n    }\n  }], [{\n    key: \"pluginName\",\n    get: function get() {\n      return \"musicmeta\";\n    }\n  }, {\n    key: \"defaultConfig\",\n    get: function get() {\n      return {\n        index: 0\n      };\n    }\n  }]);\n  return MusicMeta2;\n}(Plugin);\nexport { MusicMeta };\n","import { createClass as _createClass, classCallCheck as _classCallCheck, objectSpread2 as _objectSpread2 } from \"./_virtual/_rollupPluginBabelHelpers.js\";\nimport { Util } from \"xgplayer\";\nimport Music from \"./music.js\";\nimport { MusicCover } from \"./plugins/musicCover.js\";\nimport { MusicBackward } from \"./plugins/musicBackward.js\";\nimport { MusicPrev } from \"./plugins/musicPrev.js\";\nimport { MusicForward } from \"./plugins/musicForward.js\";\nimport { MusicNext } from \"./plugins/musicNext.js\";\nimport { MusicMeta } from \"./plugins/musicMeta.js\";\nfunction initMusicConfig(playerConfig) {\n  if (Util.typeOf(playerConfig.controls) !== \"Object\") {\n    playerConfig.controls = {\n      mode: \"flex\",\n      initShow: true\n    };\n  } else {\n    var _c = playerConfig.controls;\n    playerConfig.controls = _objectSpread2({\n      mode: \"flex\",\n      initShow: true\n    }, _c);\n  }\n  var _p = playerConfig.play || {};\n  playerConfig.play = _objectSpread2({\n    index: 3\n  }, _p);\n  playerConfig.marginControls = true;\n  playerConfig.mediaType = \"audio\";\n}\nvar MusicPreset = /* @__PURE__ */ _createClass(function MusicPreset2(options, playerConfig) {\n  _classCallCheck(this, MusicPreset2);\n  console.log(\"config\", options, playerConfig);\n  console.log(\"playerConfig\", Util.typeOf(playerConfig.controls) !== \"Object\");\n  initMusicConfig(playerConfig);\n  this.plugins = [\n    Music,\n    MusicBackward,\n    MusicPrev,\n    MusicForward,\n    MusicNext,\n    MusicCover,\n    MusicMeta\n  ];\n  this.ignores = [\"start\", \"cssFullScreen\", \"fullscreen\", \"pip\", \"enter\", \"replay\", \"pc\", \"loading\", \"poster\"];\n});\nexport { MusicPreset as default };\n","function getGradient(ctx, w, colors) {\n  var gradient = ctx.createLinearGradient(0, 0, w, 0);\n  var len = colors.length;\n  var per = 100 / len;\n  for (var i = 0; i < colors.length; i++) {\n    gradient.addColorStop(per * i / 100, colors[i]);\n  }\n  return gradient;\n}\nfunction shrink(data, count) {\n  if (!count || count < 1) {\n    count = data.length * count;\n  }\n  var rtn = [];\n  var splitAt = Math.floor(data.length / count);\n  for (var i = 1; i <= count; i++) {\n    var arraySection = data.slice(i * splitAt, i * splitAt + splitAt);\n    var middle = arraySection[Math.floor(arraySection.length / 2)];\n    rtn.push(middle);\n  }\n  return rtn;\n}\nfunction scale(data, max) {\n  var scalePercent = max / 255;\n  if (max <= 3 && max >= 0)\n    scalePercent = max;\n  var rtn = data.map(function(value) {\n    return value * scalePercent;\n  });\n  return rtn;\n}\nfunction split(data, count) {\n  var size = Math.floor(data.length / count);\n  var rtn = [];\n  var temp = [];\n  var track = 0;\n  for (var i = 0; i <= size * count; i++) {\n    if (track === size) {\n      rtn.push(temp);\n      temp = [];\n      track = 0;\n    }\n    temp.push(data[i]);\n    track++;\n  }\n  return rtn;\n}\nexport { getGradient, scale, shrink, split };\n","import { shrink, scale, split } from \"./helper.js\";\nfunction drawPath(ctx, dataArray, options, bufferLen) {\n  var w = options.w, linear = options.linear, reverse = options.reverse, offset = options.offset;\n  ctx.save();\n  ctx.beginPath();\n  var sliceWidth = w * 1 / bufferLen;\n  ctx.strokeStyle = linear;\n  var x = 0;\n  var y = 0;\n  for (var i = 0; i < bufferLen; i++) {\n    y = reverse ? 0 - dataArray[i] : dataArray[i];\n    y = offset - y;\n    if (i === 0) {\n      ctx.moveTo(x, y);\n    } else {\n      ctx.lineTo(x, y);\n    }\n    x += sliceWidth;\n  }\n  ctx.lineTo(w, y);\n  ctx.stroke();\n}\nvar drawWaves = function(context) {\n  var options = context.options, ctx = context.ctx, h = context.h, w = context.w;\n  var data = context.data;\n  var colors = options.colors;\n  data = shrink(data, 2048);\n  data = scale(data, h / 2);\n  data = split(data, 4).slice(0, 3);\n  ctx.clearRect(0, 0, w, h);\n  ctx.fillStyle = options.bgColor;\n  ctx.fillRect(0, 0, w, h);\n  for (var i = 0; i < data.length; i++) {\n    drawPath(ctx, data[i], {\n      linear: colors[i],\n      w,\n      h,\n      offset: h / 2,\n      reverse: false\n    }, data[i].length);\n    drawPath(ctx, data[i], {\n      linear: colors[i],\n      w,\n      h,\n      offset: h / 2,\n      reverse: true\n    }, data[i].length);\n  }\n};\nexport { drawWaves as default };\n","import { objectSpread2 as _objectSpread2 } from \"../_virtual/_rollupPluginBabelHelpers.js\";\nimport drawBars from \"./drawBars.js\";\nimport drawVertLines from \"./drawVertlines.js\";\nimport drawLightning from \"./drawLightning.js\";\nimport drawDoubleline from \"./drawDoubleline.js\";\nimport drawDoubleBars from \"./drawDoubleBars.js\";\nimport drawWaves from \"./drawWaves.js\";\nvar modeMap = {\n  bars: drawBars,\n  vertLines: drawVertLines,\n  lightning: drawLightning,\n  doubleLine: drawDoubleline,\n  doubleBars: drawDoubleBars,\n  waves: drawWaves\n};\nvar frameRateMap = {\n  bars: 2,\n  vertLines: 1,\n  lightning: 2,\n  doubleLine: 1,\n  doubleBars: 2,\n  waves: 2\n};\nvar MODES = {\n  BARS: \"bars\",\n  VERT_LINES: \"vertLines\",\n  LIGHTNING: \"lightning\",\n  DOUBLE_LINE: \"doubleLine\",\n  DOUBLE_BARS: \"doubleBars\",\n  WAVES: \"waves\"\n};\nfunction render(data, canvas) {\n  var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n  var frame = arguments.length > 3 ? arguments[3] : void 0;\n  if (!canvas) {\n    return;\n  }\n  options = _objectSpread2({}, options);\n  if (!options.stroke)\n    options.stroke = 1;\n  if (!options.colors)\n    options.colors = [\"#ff8177\", \"#cf556c\", \"#f99185\", \"#b12a5b\"];\n  var ctx = canvas.getContext(\"2d\");\n  var h = canvas.height;\n  var w = canvas.width;\n  ctx.strokeStyle = options.colors[0];\n  ctx.lineWidth = options.stroke;\n  var context = {\n    data,\n    options,\n    ctx,\n    h,\n    w\n  };\n  if (typeof options.mode === \"string\")\n    options.mode = [options.mode];\n  options.mode.forEach(function(mode) {\n    if (frame % frameRateMap[mode] === 0) {\n      ctx.clearRect(0, 0, w, h);\n      ctx.beginPath();\n      modeMap[mode](context);\n    }\n  });\n}\nexport { MODES, render as default };\n","var drawBars = function(context) {\n  var data = context.data, options = context.options, ctx = context.ctx, h = context.h, w = context.w;\n  var count = data.length > options.count ? options.count : data.length;\n  var percent = parseInt(h / 255 * 2, 10);\n  ctx.clearRect(0, 0, w, h);\n  ctx.fillStyle = options.bgColor;\n  ctx.fillRect(0, 0, w, h);\n  var step = w / count;\n  var barWidth = step - step / 4;\n  var barHeight;\n  var x = 0;\n  var gradient = options.linear;\n  for (var i = 0; i < count; i++) {\n    barHeight = data[i];\n    ctx.fillStyle = gradient;\n    ctx.fillRect(x, h - barHeight, barWidth, barHeight * percent + h / 2);\n    x += step;\n  }\n};\nexport { drawBars as default };\n","var drawVertLines = function(context) {\n  var data = context.data, options = context.options, ctx = context.ctx, h = context.h, w = context.w;\n  var count = options.count || 128;\n  if (data.length < count) {\n    count = data.length;\n  }\n  var percent = h / 255;\n  var increase = w / count;\n  var gradient = options.linear;\n  ctx.clearRect(0, 0, w, h);\n  ctx.fillStyle = options.bgColor;\n  ctx.fillRect(0, 0, w, h);\n  for (var point = 1; point <= count; point++) {\n    var p = data[point];\n    p *= percent;\n    var x = increase * point;\n    ctx.moveTo(x, h);\n    ctx.lineTo(x, h - p);\n    ctx.strokeStyle = gradient;\n    ctx.stroke();\n    ctx.beginPath();\n  }\n};\nexport { drawVertLines as default };\n","var drawLightning = function(context) {\n  var data = context.data, options = context.options, ctx = context.ctx, h = context.h, w = context.w;\n  var bufferLen = data.length > options.count ? options.count : data.length;\n  ctx.clearRect(0, 0, w, h);\n  ctx.fillStyle = options.bgColor;\n  ctx.fillRect(0, 0, w, h);\n  ctx.beginPath();\n  var gradient = options.linear;\n  ctx.strokeStyle = gradient;\n  var sliceWidth = w / bufferLen;\n  var x = 0;\n  for (var i = 0; i < bufferLen; i++) {\n    var v = data[i] / 128;\n    var y = v * h / 2;\n    if (i === 0) {\n      ctx.moveTo(x, y);\n    } else {\n      ctx.lineTo(x, y);\n    }\n    x += sliceWidth;\n  }\n  ctx.lineTo(w, h / 2);\n  ctx.stroke();\n};\nexport { drawLightning as default };\n","var drawDoubleline = function(context) {\n  var data = context.data, options = context.options, ctx = context.ctx, h = context.h, w = context.w;\n  var percent = h / 255;\n  var increase = w / 128;\n  var count = options.count || 128;\n  var min = 5;\n  ctx.clearRect(0, 0, w, h);\n  ctx.fillStyle = options.bgColor;\n  ctx.fillRect(0, 0, w, h);\n  var gradient = options.linear;\n  for (var point = 1; point <= count; point++) {\n    var p = data[point];\n    p += min;\n    p *= percent;\n    var x = increase * point;\n    var mid = h / 2 + p / 2;\n    ctx.moveTo(x, mid);\n    ctx.lineTo(x, mid - p);\n    ctx.strokeStyle = gradient;\n    ctx.stroke();\n    ctx.beginPath();\n  }\n};\nexport { drawDoubleline as default };\n","var drawDoubleBars = function(context) {\n  var data = context.data, options = context.options, ctx = context.ctx, h = context.h, w = context.w;\n  var count = data.length > options.count ? options.count : data.length;\n  var percent = h / 255;\n  ctx.clearRect(0, 0, w, h);\n  ctx.fillStyle = options.bgColor;\n  ctx.fillRect(0, 0, w, h);\n  var step = w / count;\n  var barWidth = step - step / 4;\n  var barHeight;\n  var x = 0;\n  var gradient = options.linear;\n  for (var i = 0; i < count; i++) {\n    barHeight = data[i] * percent;\n    ctx.fillStyle = gradient;\n    ctx.fillRect(x, h / 2 + barHeight / 2, barWidth, -barHeight);\n    x += step;\n  }\n};\nexport { drawDoubleBars as default };\n","import { createClass as _createClass, classCallCheck as _classCallCheck, defineProperty as _defineProperty } from \"../_virtual/_rollupPluginBabelHelpers.js\";\nimport render, { MODES } from \"./render.js\";\nexport { MODES } from \"./render.js\";\nimport { getGradient } from \"./helper.js\";\nvar Analyze = /* @__PURE__ */ function() {\n  function Analyze2(player, canvas) {\n    var _this = this;\n    var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n    _classCallCheck(this, Analyze2);\n    _defineProperty(this, \"start\", function() {\n      if (_this.reqId) {\n        return;\n      }\n      _this._renderFrame();\n    });\n    _defineProperty(this, \"stop\", function() {\n      cancelAnimationFrame(_this.reqId);\n      _this.reqId = null;\n    });\n    _defineProperty(this, \"_onDestroy\", function() {\n      _this._audioCtx.close();\n    });\n    _defineProperty(this, \"_onoVolumechange\", function() {\n      console.log(\"onoVolumechange\");\n      _this.gainNode.gain.setValueAtTime(_this.player.volume, _this.player.currentTime);\n    });\n    _defineProperty(this, \"_renderFrame\", function() {\n      if (_this.reqId) {\n        cancelAnimationFrame(_this.reqId);\n      }\n      _this.reqId = requestAnimationFrame(_this._renderFrame);\n      _this.frameCount++;\n      _this.mode === \"lightning\" ? _this.analyser.getByteTimeDomainData(_this.dataArray) : _this.analyser.getByteFrequencyData(_this.dataArray);\n      render.call(_this, _this.dataArray, _this.canvas, _this.options, _this.frameCount);\n    });\n    this.canvas = canvas;\n    var _this$canvas$getBound = this.canvas.getBoundingClientRect(), width = _this$canvas$getBound.width, height = _this$canvas$getBound.height;\n    this.canvas.width = width * 2;\n    this.canvas.height = height * 2;\n    this.player = player;\n    this.options = Analyze2.defaultConfig;\n    Object.keys(options).map(function(key) {\n      _this.options[key] = options[key];\n    });\n    if (!Analyze2.AudioCtx) {\n      return;\n    }\n    if (player.audioCtx) {\n      this._audioCtx = player.audioCtx;\n    } else {\n      this._audioCtx = new Analyze2.AudioCtx();\n    }\n    this.analyser = this._audioCtx.createAnalyser();\n    var gainNode = this._audioCtx.createGain();\n    gainNode.gain.setValueAtTime(player.volume, player.currentTime);\n    this.gainNode = gainNode;\n    this.source = this._audioCtx.createMediaElementSource(player.video);\n    this.ctx = canvas.getContext(\"2d\");\n    this.source.connect(this.analyser);\n    this.analyser.connect(gainNode);\n    this.fftSize = this.options.fftSize;\n    this.frameCount = 0;\n    if (this.options.isGradient) {\n      this.options.linear = getGradient(this.ctx, canvas.width, this.options.colors);\n    }\n    gainNode.connect(this._audioCtx.destination);\n    this._initPlayerEvents();\n  }\n  _createClass(Analyze2, [{\n    key: \"_initPlayerEvents\",\n    value: function _initPlayerEvents() {\n      var _this2 = this;\n      [\"play\", \"playing\", \"seeked\"].forEach(function(name) {\n        _this2.player.on(name, _this2.start);\n      });\n      this.player.on(\"volumechange\", this._onoVolumechange);\n      this.player.on(\"destroy\", this._onDestroy);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this3 = this;\n      this.stop();\n      [\"play\", \"playing\", \"seeked\"].forEach(function(name) {\n        _this3.player.off(name, _this3.start);\n      });\n      this.player.off(\"volumechange\", this._onoVolumechange);\n      this.player.off(\"destroy\", this._onDestroy);\n      this._audioCtx.close();\n    }\n  }, {\n    key: \"mode\",\n    get: function get() {\n      return this.options.mode;\n    },\n    set: function set(val) {\n      this.options.mode = val;\n    }\n  }, {\n    key: \"fftSize\",\n    get: function get() {\n      return this.analyser.frequencyBinCount * 2;\n    },\n    set: function set(val) {\n      this.analyser.fftSize = val;\n      var bufferLen = this.analyser.frequencyBinCount;\n      this.dataArray = new Uint8Array(bufferLen);\n    }\n  }], [{\n    key: \"defaultConfig\",\n    get: function get() {\n      return {\n        fftSize: 16384,\n        count: 1024,\n        mode: \"bars\",\n        colors: [\"#ff8177\", \"#cf556c\", \"#f99185\", \"#b12a5b\"],\n        stroke: 2,\n        bgColor: \"#000\",\n        isGradient: true,\n        linear: null\n      };\n    }\n  }, {\n    key: \"MODES\",\n    get: function get() {\n      return MODES;\n    }\n  }, {\n    key: \"AudioCtx\",\n    get: function get() {\n      return window.AudioContext || window.webkitAudioContext;\n    }\n  }]);\n  return Analyze2;\n}();\nexport { Analyze as default };\n"],"sourceRoot":""}